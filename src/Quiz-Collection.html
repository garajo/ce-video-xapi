<h3>{collectionTitle}</h3>
<slot></slot>
<br/>
<br/>
<br/>
<button on:click="gradeQuiz()" >grade quiz</button>

<script>

import './quiz-collections/QuizSection.html';
import './quiz-collections/True-False.html';
import './quiz-collections/Multiple-Choice.html';
import './quiz-collections/Mc-Option.html';

export default {
  tag: 'quiz-collection',
  data() {
    return {
      collectionTitle: 'Collection Title',
    }
  },
  oncreate() {
    const [slot] = this.shadowRoot.querySelectorAll('slot')
    const slotLoadHandler = (e) => {
      
      
      setTimeout(() => {
        // console.log('this.children', this.children)
        
        // Array.from(this.children).forEach(ea => {
          //   console.log('ea', ea)
          //   console.log('ea', ea.tagName)
          // })
          
        }, 1)
        
        slot.removeEventListener('slotchange', slotLoadHandler)
      }
      
      slot.addEventListener('slotchange', slotLoadHandler)
  },
  methods: {
    setTitle(val) {
      this.set({ collectionTitle: val })
    },
    startQuiz() {
      console.log('start quiz')
      console.log('this.children', this.children)
      
    },
    gradeQuiz() {
      console.log('window.fetch', window.fetch)
      console.log('fetch', fetch)

      fetch('http://localhost:5001/answers/uuid-soetuh', {
        method: 'POST',
      })
        .then(function (response) {
          return response.json()
        }).then(function (json) {
          console.log('parsed json', json)
        }).catch(function (ex) {
          console.log('parsing failed', ex)
        })

    },
    endQuiz() {
      
    }
  }
}

</script>